<div class="container mt-3">
  <div class="row">
    <h2>{{ title }} hello</h2>
    <div class="col-xs-12 col-md-12">&nbsp;</div>
  </div>
</div>
<div class="container">
  <div class="row">
    <div class="col-xs-12 col-md-12 mt-3">
      <h4 class="text-primary">Congregation's Report</h4>
      <hr />
    </div>
  </div>
</div>
<br />

<div class="container">
  <div class="card-body">
    <form
      #myForm="ngForm"
      class="form-control-inline my-2 my-lg-0"
      (ngSubmit)="loadPublisherReport(myForm.value)"
    >
      <div class="row">
        <div class="col-sm-3">
          <h5>From</h5>
          <input
            [(ngModel)]="date.iFromDate"
            type="text"
            class="form-control"
            bsDatepicker
            [bsValue]="date?.iFromDate"
            [bsConfig]="{ dateInputFormat: 'MM/YYYY' }"
            name="iFromDate"
            id="iFromDate"
            required
          />
        </div>

        <div class="col-sm-3">
          <h5>To</h5>
          <input
            [(ngModel)]="date.iToDate"
            type="text"
            class="form-control"
            bsDatepicker
            [bsValue]="date?.iToDate"
            [bsConfig]="{ dateInputFormat: 'MM/YYYY' }"
            id="iToDate"
            name="iToDate"
            required
          />
        </div>

        <div class="col-sm-4">
          <h5>Publisher</h5>
          <select
            class="form-control form-control-lg"
            [(ngModel)]="selectedPublisher"
            name="iPublisherId">
            <option
              *ngFor="let publisher of publishers"
              value="{{publisher.id}}"
              >&nbsp;{{ publisher.nome }}&nbsp;</option
            >
          </select>
        </div>

        <div class="col-sm-2">
          <h5 class="card-text">&nbsp;</h5>
          <button
            type="submit"
            class="btn btn-success custombutton"
            [disabled]="!myForm.dirty"
          >
            <i class="fa fa-filter"></i> Filter
          </button>
        </div>
      </div>
    </form>
  </div>
</div>

<div *ngIf="!reports" class="container">
  <div class="card mt-3 w-75 alert alert-info">
    <p class="card-text">
      <strong>Information:</strong>&nbsp;Select a publisher to see the report!
    </p>
  </div>
</div>

<div *ngIf="reports" class="container">
  <div class="card mt-6">
    <div class="panel panel-default">
      <!-- Default panel contents -->
      <div class="panel-heading">
        <h3 class="text-primary text-center">{{ title }}</h3>
      </div>
      <div class="panel-body">
        <h5 class="text-success text-center">{{ subHeader }}</h5>
        <h6 class="text-info text-center">
          {{ fromDateSubHeader }} - {{ toDateSubHeader }}
        </h6>
      </div>

      <!-- Table nova -->
      <table class="table">
        <thead>
          <tr>
            <th scope="col">Name</th>
            <th scope="col">Pioneer</th>
            <th scope="col">Colocations</th>
            <th scope="col">Video</th>
            <th scope="col">Hours</th>
            <th scope="col">Bethel</th>
            <th scope="col">Credit</th>
            <th scope="col">Returns</th>
            <th scope="col">Studies</th>
            <th scope="col">Obs</th>
            <th scope="col">Status</th>
            <th scope="col">Group</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of reports">
            <td class="text-info">
              {{ item.dataReferencia | date: 'MMM/yyyy' }}
            </td>
            <td>{{ item.pioneiro.descricao }}</td>
            <td class="text-center">{{ item.publicacoes }}</td>
            <td class="text-center">{{ item.videosMostrados }}</td>
            <td *ngIf="item.horas > 0" class="text-center text-primary ">
              <strong>{{ item.horas }}</strong>
            </td>
            <td *ngIf="item.horas == 0" class="text-center text-danger ">
              <strong>{{ item.horas }}</strong>
            </td>
            <td class="text-center text-info ">
              <strong>{{ item.horasBetel }}</strong>
            </td>
            <td class="text-center text-info ">
              <strong>{{ item.creditoHoras }}</strong>
            </td>
            <td class="text-center">{{ item.revisitas }}</td>
            <td class="text-center">{{ item.estudos }}</td>
            <td class="text-center small">{{ item.observacao }}</td>
            <td class="text-center">
              {{ item.publicador.situacaoServicoCampo }}
            </td>
            <td class="text-center">{{ item.publicador.grupo.local }}</td>
          </tr>
        </tbody>
      </table>
      <!-- Fim Table nova -->
    </div>
  </div>
</div>

<div class="container">
  <div><canvas id="myChart" width="400" height="200" #myChart></canvas></div>
</div>
