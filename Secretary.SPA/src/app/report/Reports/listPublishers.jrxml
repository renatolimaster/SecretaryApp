<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="listPublishers" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="e6c0c3f1-31a3-4667-b3e1-dd9144c186d3">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<queryString>
		<![CDATA[SELECT
     congregacao.`id` AS congregacao_id,
     congregacao.`coordenador` AS congregacao_coordenador,
     congregacao.`nome` AS congregacao_nome,
     congregacao.`numero` AS congregacao_numero,

     publicador.`id` AS publicador_id,
     publicador.`batismo` AS publicador_batismo,
     publicador.`data_nascimento` AS publicador_data_nascimento,
     publicador.`email` AS publicador_email,
     publicador.`nome` AS publicador_nome,
     publicador.`situacao_servico_campo` AS publicador_situacao_servico_campo,
     publicador.`tel_celular` AS publicador_tel_celular,
     publicador.`tel_residencial` AS publicador_tel_residencial,
     publicador.`tel_trabalho` AS publicador_tel_trabalho,

     dianteira.`id` AS dianteira_id,
     dianteira.`descricao` AS dianteira_descricao,

     pioneiro.`id` AS pioneiro_id,
     pioneiro.`descricao` AS pioneiro_descricao,
     grupo.id as grupo_id,
     (select p.nome from grupo g inner join publicador p ON g.id = p.grupo_id and g.superintendente_id = p.id
	  where g.id = grupo.id and g.superintendente_id = grupo.superintendente_id) as superintendente,
     (select p.nome from grupo g inner join publicador p ON g.id = p.grupo_id and g.ajudante_id = p.id
	  where g.id = grupo.id and g.ajudante_id = grupo.ajudante_id) as ajudante
FROM
     `congregacao` congregacao
	  INNER JOIN `publicador` publicador ON congregacao.`id` = publicador.`congregacao_id`
     LEFT OUTER JOIN `dianteira` dianteira ON publicador.`dianteira_id` = dianteira.`id`
     LEFT OUTER JOIN `pioneiro` pioneiro ON publicador.`pioneiro_id` = pioneiro.`id`
     RIGHT OUTER JOIN `grupo` grupo ON publicador.`grupo_id` = grupo.`id`

ORDER BY
	  congregacao.nome, grupo.id, publicador.nome]]>
	</queryString>
	<field name="congregacao_id" class="java.lang.Long"/>
	<field name="congregacao_coordenador" class="java.lang.String"/>
	<field name="congregacao_nome" class="java.lang.String"/>
	<field name="congregacao_numero" class="java.lang.String"/>
	<field name="publicador_id" class="java.lang.Long"/>
	<field name="publicador_batismo" class="java.sql.Timestamp"/>
	<field name="publicador_data_nascimento" class="java.sql.Timestamp"/>
	<field name="publicador_email" class="java.lang.String"/>
	<field name="publicador_nome" class="java.lang.String"/>
	<field name="publicador_situacao_servico_campo" class="java.lang.String"/>
	<field name="publicador_tel_celular" class="java.lang.String"/>
	<field name="publicador_tel_residencial" class="java.lang.String"/>
	<field name="publicador_tel_trabalho" class="java.lang.String"/>
	<field name="dianteira_id" class="java.lang.Long"/>
	<field name="dianteira_descricao" class="java.lang.String"/>
	<field name="pioneiro_id" class="java.lang.Long"/>
	<field name="pioneiro_descricao" class="java.lang.String"/>
	<field name="grupo_id" class="java.lang.Long"/>
	<field name="superintendente" class="java.lang.String"/>
	<field name="ajudante" class="java.lang.String"/>
	<variable name="grupo_id_1" class="java.lang.Long" resetType="Group" resetGroup="grupo_id" calculation="Sum">
		<variableExpression><![CDATA[$F{grupo_id}]]></variableExpression>
	</variable>
	<variable name="congregacao_id_1" class="java.lang.Long" resetType="Group" resetGroup="congregacao_id" calculation="Sum">
		<variableExpression><![CDATA[$F{congregacao_id}]]></variableExpression>
	</variable>
	<variable name="publicador_id_1" class="java.lang.Long" resetType="Group" resetGroup="grupo_id" calculation="Sum">
		<variableExpression><![CDATA[$F{publicador_id}]]></variableExpression>
	</variable>
	<variable name="grupo_id_2" class="java.lang.Long" resetType="Group" resetGroup="grupo_id" calculation="Sum">
		<variableExpression><![CDATA[$F{grupo_id}]]></variableExpression>
	</variable>
	<variable name="congregacao_id_2" class="java.lang.Long" resetType="Group" resetGroup="grupo_id" calculation="Sum">
		<variableExpression><![CDATA[$F{congregacao_id}]]></variableExpression>
	</variable>
	<group name="congregacao_id">
		<groupExpression><![CDATA[$F{congregacao_id}]]></groupExpression>
		<groupHeader>
			<band height="27">
				<rectangle>
					<reportElement x="0" y="0" width="555" height="27" backcolor="#CCFFCC" uuid="c51270f1-d23f-4e11-aa4f-d8bd504b06ec"/>
					<graphicElement>
						<pen lineWidth="0.0"/>
					</graphicElement>
				</rectangle>
				<textField>
					<reportElement x="93" y="4" width="297" height="20" uuid="1ca55d5d-5a38-465d-9373-245b1aafe862"/>
					<textElement verticalAlignment="Middle">
						<font size="12"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{congregacao_nome} + " - " + $F{congregacao_numero}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="1" y="4" width="83" height="20" uuid="10d227c6-b0c3-41a5-9f4a-142e94724328"/>
					<textElement verticalAlignment="Middle">
						<font size="12"/>
					</textElement>
					<text><![CDATA[Congregação:]]></text>
				</staticText>
				<staticText>
					<reportElement x="454" y="0" width="100" height="15" uuid="68a98656-26e6-4763-a3bd-6d4071158f20"/>
					<textElement textAlignment="Right"/>
					<text><![CDATA[Coordenador]]></text>
				</staticText>
				<textField>
					<reportElement x="399" y="4" width="155" height="20" uuid="60855864-68ed-49d4-82d4-7e3890c3cf04"/>
					<textElement textAlignment="Right" verticalAlignment="Bottom"/>
					<textFieldExpression><![CDATA[$F{congregacao_coordenador}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="23">
				<rectangle>
					<reportElement x="0" y="0" width="555" height="23" backcolor="#009999" uuid="4756d0ed-6f19-4f62-9f66-b95ce166faff"/>
					<graphicElement>
						<pen lineWidth="0.0"/>
					</graphicElement>
				</rectangle>
				<textField>
					<reportElement x="108" y="2" width="100" height="20" uuid="4086046b-5c7f-452f-8b75-5cf311d3b084"/>
					<textElement verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[$V{congregacao_id_1}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="8" y="2" width="100" height="20" uuid="9f88b007-10fb-48c9-abc0-5bd15e6ada8f"/>
					<textElement verticalAlignment="Middle"/>
					<text><![CDATA[Total publicadores: ]]></text>
				</staticText>
			</band>
		</groupFooter>
	</group>
	<group name="grupo_id">
		<groupExpression><![CDATA[$F{grupo_id}]]></groupExpression>
		<groupHeader>
			<band height="44">
				<rectangle>
					<reportElement x="0" y="0" width="555" height="21" backcolor="#33FF99" uuid="173fa8ec-53b5-4b7a-96a4-fedc46265ac2"/>
					<graphicElement>
						<pen lineWidth="0.0"/>
					</graphicElement>
				</rectangle>
				<textField>
					<reportElement x="63" y="0" width="393" height="20" uuid="51283056-c950-48b9-846e-06f28c5b3117"/>
					<textElement verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[$F{superintendente}  + " - " + $F{ajudante}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="16" y="21" width="100" height="20" uuid="f76a1c45-6a20-409c-a3f9-dbc89b315400"/>
					<textElement verticalAlignment="Bottom"/>
					<text><![CDATA[Publicadores]]></text>
				</staticText>
				<staticText>
					<reportElement x="1" y="0" width="62" height="20" uuid="efdf2e3a-5989-4c07-9c50-93babf890767"/>
					<textElement verticalAlignment="Middle"/>
					<text><![CDATA[Grupo:]]></text>
				</staticText>
				<line>
					<reportElement x="0" y="20" width="555" height="1" uuid="d48a4eef-b26d-4750-8d43-8b2712fb38cb"/>
				</line>
				<line>
					<reportElement x="0" y="43" width="555" height="1" uuid="7239fe73-5718-4949-82ea-1802a28e7ab5"/>
				</line>
				<staticText>
					<reportElement x="312" y="21" width="60" height="20" uuid="d97a5990-c3bc-4249-98d3-ac1d59276034"/>
					<textElement textAlignment="Center" verticalAlignment="Bottom"/>
					<text><![CDATA[Nascimento]]></text>
				</staticText>
				<staticText>
					<reportElement x="372" y="21" width="60" height="20" uuid="34072724-1f96-46ec-9e89-481f35b7f567"/>
					<textElement textAlignment="Center" verticalAlignment="Bottom"/>
					<text><![CDATA[Celular]]></text>
				</staticText>
				<staticText>
					<reportElement x="432" y="21" width="60" height="20" uuid="a1e05560-065a-4616-8c3f-1cfc5801293a"/>
					<textElement textAlignment="Center" verticalAlignment="Bottom"/>
					<text><![CDATA[Residencial]]></text>
				</staticText>
				<staticText>
					<reportElement x="495" y="21" width="60" height="20" uuid="c715d27f-9c09-4be2-8625-1af3e11d6284"/>
					<textElement textAlignment="Center" verticalAlignment="Bottom"/>
					<text><![CDATA[Trabalho]]></text>
				</staticText>
				<staticText>
					<reportElement x="190" y="21" width="60" height="20" uuid="b0251fbb-c44e-4094-a8f6-16785e153bd5"/>
					<textElement textAlignment="Center" verticalAlignment="Bottom"/>
					<text><![CDATA[Dianteira]]></text>
				</staticText>
				<staticText>
					<reportElement x="250" y="21" width="60" height="20" uuid="7ec8950c-aa4e-4571-ac7a-1cff3f0e7784"/>
					<textElement textAlignment="Center" verticalAlignment="Bottom"/>
					<text><![CDATA[Pioneiro]]></text>
				</staticText>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="26">
				<rectangle>
					<reportElement x="0" y="0" width="555" height="26" backcolor="#00CC99" uuid="875bafb9-8b0c-4fa1-81db-591cc7ba0ae2"/>
					<graphicElement>
						<pen lineWidth="0.0"/>
					</graphicElement>
				</rectangle>
				<staticText>
					<reportElement x="8" y="3" width="100" height="20" uuid="3694a628-72a8-495c-a584-f928ae65b676"/>
					<textElement verticalAlignment="Middle"/>
					<text><![CDATA[Total do grupo:]]></text>
				</staticText>
				<textField>
					<reportElement x="108" y="3" width="100" height="20" uuid="73ecdddd-7395-4c73-a3b3-4de0f8b69cec"/>
					<textElement verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[$V{congregacao_id_2}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band splitType="Stretch"/>
	</title>
	<pageHeader>
		<band height="46" splitType="Stretch">
			<rectangle>
				<reportElement x="0" y="0" width="56" height="46" backcolor="#003399" uuid="d57d5b0c-6f10-4172-8290-ac1f4e94535e"/>
				<graphicElement>
					<pen lineWidth="0.0"/>
				</graphicElement>
			</rectangle>
			<staticText>
				<reportElement x="8" y="0" width="38" height="30" forecolor="#FFFFFF" uuid="f2a806b6-1821-4ca9-a081-701d72523d48"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="18" isBold="true"/>
				</textElement>
				<text><![CDATA[JW]]></text>
			</staticText>
			<staticText>
				<reportElement x="8" y="26" width="38" height="16" forecolor="#FFFFFF" uuid="3ad4cc65-a84d-4467-a824-63008dae6a6a"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[.ORG]]></text>
			</staticText>
			<staticText>
				<reportElement x="75" y="2" width="404" height="30" uuid="7bf50091-6c70-44cd-942f-ded7d9ef2ec1"/>
				<textElement textAlignment="Center">
					<font size="20" isBold="true"/>
				</textElement>
				<text><![CDATA[Testemunhas Cristãs de Jeová]]></text>
			</staticText>
			<staticText>
				<reportElement x="189" y="26" width="167" height="20" uuid="24bb617c-aa82-45a9-8653-6f14de386a40"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="14" isBold="false"/>
				</textElement>
				<text><![CDATA[Lista de Publicadores]]></text>
			</staticText>
			<textField pattern="EEEEE dd MMMMM yyyy">
				<reportElement x="390" y="26" width="165" height="20" uuid="b00584a5-91fa-4754-9682-e701db5d63d3"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band splitType="Stretch"/>
	</columnHeader>
	<detail>
		<band height="20" splitType="Stretch">
			<textField>
				<reportElement x="16" y="2" width="168" height="15" uuid="d7fbdf05-8c85-4d21-8d8a-92d984503dd7"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{publicador_nome}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy" isBlankWhenNull="true">
				<reportElement x="312" y="2" width="60" height="15" uuid="107e8e48-2a0d-4a55-b609-dfa669145eb3"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{publicador_data_nascimento}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="372" y="2" width="60" height="15" uuid="8f817363-055a-495b-9232-89726be3264c"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{publicador_tel_celular}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="432" y="2" width="60" height="15" uuid="372af48d-e595-4182-bfdf-4f3708b01449"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{publicador_tel_residencial}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="495" y="2" width="60" height="15" uuid="9e0cdf19-b236-4ce3-b183-592038483b66"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{publicador_tel_trabalho}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="190" y="2" width="60" height="15" uuid="29cdf9a5-9f1a-4ba8-9796-124d56583c48"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{dianteira_descricao}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="250" y="2" width="60" height="15" uuid="e4fd0e55-9b39-4895-b8ea-73f35a6f1b12"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{pioneiro_descricao}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band height="17" splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="25" splitType="Stretch">
			<textField>
				<reportElement x="455" y="0" width="100" height="20" uuid="f23f615d-8052-4488-ae1f-40ec70a00e7f"/>
				<textElement textAlignment="Right" verticalAlignment="Top">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="0" y="0" width="555" height="1" uuid="78718e09-c183-4962-bcee-78c684fa7e5c"/>
				<graphicElement>
					<pen lineWidth="0.25"/>
				</graphicElement>
			</line>
		</band>
	</pageFooter>
	<summary>
		<band splitType="Stretch"/>
	</summary>
</jasperReport>
